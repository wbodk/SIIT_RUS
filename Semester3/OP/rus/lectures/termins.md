# 1. ВВЕДЕНИЕ В БАЗЫ ДАННЫХ

## 1.1 Предметная область информационной системы

#### Информация

**Информация** представляет собой любые сведения о событии, сущности, процессе и т.п., подлежащие операциям восприятия, передачи, преобразования, хранения или использования. Это зафиксированная в форме, пригодной для обработки, передачи и хранения информация, например, в памяти ЭВМ или подготовленная для ввода в ЭВМ. Подготовка информации включает в себя формализацию, сбор и перенос на машинные носители.

#### Обработка данных

**Обработка данных**  - это совокупность задач, осуществляющих преобразование массивов данных. Это включает в себя ввод данных в ЭВМ, отбор данных по критериям, преобразование структуры данных, перемещение данных во внешней памяти ЭВМ, вывод данных в удобной для пользователя форме.

#### Система обработки данных (СОД)

**Система обработки данных (СОД)** (или **Информационная система**) - это набор аппаратных и программных средств, осуществляющих выполнение задач по управлению данными. Управление данными включает в себя функции представления данных, их накопления, хранения, обновления, удаления, поиска по критериям и выдачи данных.

#### Управление данными

**Управление данными** - это деятельность по обновлению, восстановлению и изменению структуры базы данных с целью обеспечения её целостности, сохранности и эффективности использования.

#### Предметная область (ПО)

**Предметная область (ПО)** - это часть реального мира, подлежащая изучению с целью организации управления и автоматизации. ПО информационной системы рассматривается как совокупность реальных процессов и объектов (**сущностей** - **Entity**), представляющих интерес для её пользователей. Каждая из **сущностей ПО** обладает определённым набором свойств (**атрибутов**), среди которых можно выделить существенные и малозначительные. Признание какого-либо свойства существенным носит относительный характер. Например, атрибут *_Должность_* для *_сотрудника_* является существенным, а для *_читателя библиотеки_* – малозначительным.

#### База данных (БД)

**База данных (БД)** - это совокупность данных, организованных по определённым правилам, предусматривающим общие принципы описания, хранения и манипулирования данными, независимая от прикладных программ.

#### Система управления базами данных (СУБД)

**Система управления базами данных (СУБД)** - это совокупность программ и языковых средств, предназначенных для управления данными в базе данных, ведения базы данных и обеспечения взаимодействия с прикладными программами.

#### Автоматизированная информационная система (АИС)

**Автоматизированная информационная система (АИС)** представляет собой комплекс методов и средств для поддержания динамической информационной модели предметной области с целью обеспечения информационных запросов пользователей.

#### Банк данных (БнД)

**Банк данных (БнД)** должен:

1. Обеспечивать информационные потребности внешних пользователей.
2. Обеспечивать возможность хранения и модификации больших объёмов многоаспектных данных.
3. Обеспечивать заданный уровень достоверности хранимых данных и их непротиворечивость.
4. Обеспечивать доступ к данным только пользователям с соответствующими полномочиями.
5. Обеспечивать поиск данных по произвольной группе признаков.
6. Удовлетворять заданным требованиям по производительности при обработке запросов.
7. Иметь возможность реорганизации при изменении границ ПО.
8. Обеспечивать выдачу пользователям данных в различной форме.
9. Обеспечивать простоту и удобство обращения внешних пользователей к данным.

#### Связь (Relation в ПО)

**Связь** - способ описания взаимодейсвия между сущностями. Она характеризуется **мощностью**, которая характеризует количество связей между сущностями. Связи могут быть **факультативными** или **обязательными**. Если вновь порождённая сущность одного из типов оказывается по необходимости связанной с сущностью другого типа, то между этими типами сущностей есть обязательная связь. Иначе связь является факультативной.

#### Кардинальность связи
**Кардинальность связи** описывает максимальное число связей, которое может быть установлено между экземплярами разных сущностей. 
Существует три типа **кардинальных связей**:
- один к одному (1:1)
- один ко многим (1:n)
- многие ко многим (m:n)

#### Степень связи

**Степень связи** - это количество типов сущностей которые входят в связь.
- унарная
- бинарная
- тернарная
- и т.д.

#### Структура предметной области
Совокупность типов сущностей и типов связей между ними характеризует
**структуру предметной области**. 

#### Ограничение целостности 
**Ограничения целостности** – это правила,
которым должны удовлетворять значения данных в БД.

## 1.2 Назначение и основные компоненты базы данных

#### База данных

**База данных (БД)** представляет собой организованное хранилище данных, систематизированное согласно определенным правилам. Эти данные охватывают определенную предметную область и организованы таким образом, чтобы поддерживать эффективное выполнение запросов и операций. БД независима от прикладных программ и предоставляет доступ к информации для различных пользователей.

#### Система управления базой данных

**Система управления базой данных (СУБД)** - это программное обеспечение, которое обеспечивает эффективное управление базой данных. Она предоставляет интерфейс для ввода, хранения, обновления, поиска и вывода данных в базе. СУБД также отвечает за поддержание целостности данных, управление доступом и оптимизацию производительности.

СУБД обеспечивает выполнение двух групп функций:
- предоставление доступа к базе данных прикладному программному
обеспечению (или квалифицированным пользователям);
- управление хранением и обработкой данных в БД.

#### Система Обработки Данных (СОД) в контексте Базы Данных

**Система Обработки Данных (СОД)** в контексте базы данных (БД) представляет собой комплексное решение, включающее аппаратные и программные средства, направленные на эффективную обработку информации в рамках базы данных. Эта система выполняет разнообразные задачи, связанные с управлением данными, включая ввод, хранение, обновление, поиск и вывод информации.

**Функции СОД в БД:**

1. **Ввод данных в БД:**
   - Осуществление процесса записи новых данных в базу данных.

2. **Хранение данных:**
   - Обеспечение безопасного и структурированного хранения информации.

3. **Обновление данных:**
   - Осуществление деятельности по изменению, добавлению или удалению данных в базе для поддержания их актуальности.

4. **Поиск данных:**
   - Предоставление возможности пользователю выполнять поиск информации в базе данных с учетом заданных критериев.

5. **Вывод данных:**
   - Предоставление результатов запросов в удобной для пользователя форме.

6. **Обеспечение целостности данных:**
   - Гарантирование сохранности и консистентности данных в базе.

7. **Управление доступом:**
   - Контроль за правами доступа пользователей к данным с учетом полномочий.

8. **Оптимизация производительности:**
   - Работа над повышением эффективности выполнения запросов и операций с данными.

9. **Совместимость с прикладными программами:**
   - Обеспечение взаимодействия с различными приложениями для работы с данными.

## 1.3 Уровни представления данных
Уровни представления данных отражают различные абстракции и перспективы на данные в информационных системах. Основные уровни представления данных включают:

1. **Концептуальный уровень:** (Блок-схемы)
   - Концептуальный уровень предоставляет общую модель данных для всей организации. Эта модель описывает сущности и их взаимосвязи в предметной области. На этом уровне создаются концепции, которые лежат в основе всех данных в организации.

2. **Уровень семантики данных:** (только констреинты и типы от метадаты)
   - Этот уровень связан с тем, как данные толкуются и как они отражают предметную область. Он включает в себя семантические аспекты данных, такие как значения, их значения и связи между ними.

3. **Логический уровень:** (вся метадата)
   - На этом уровне описывается структура данных независимо от физической реализации. Это включает в себя таблицы, отношения, ключи, индексы и другие элементы, определяющие логическую организацию данных. Логический уровень абстрагирует от того, как данные фактически хранятся.

4. **Физический уровень:** (Внутренний уровень)
   - Этот уровень описывает, как данные фактически хранятся на устройствах хранения, таких как жесткие диски, магнитные ленты или другие носители. Включает в себя детали организации данных, структуры файлов, методов доступа и т.д.

5. **Уровень представления:** (SQL запросы)
   - Этот уровень определяет, как данные представлены для конечного пользователя или прикладной программы. Он включает в себя запросы, отчеты, формы и другие способы визуализации данных. На этом уровне данные становятся более понятными и удобными для использования человеком.

# 2. ОСНОВНЫЕ МОДЕЛИ ДАННЫХ

## 2.1 Понятие модели данных

#### Модель данных

**Модель данных** – это совокупность правил порождения структур данных в базе данных, операций над ними, а также ограничений целостности, определяющих допустимые связи и значения данных, последовательность их изменения.
Итак, модель данных состоит из **трёх** частей:

   1. Набор типов структур данных.
   2. Набор операторов или правил вывода, которые могут быть применены к любым правильным примерам типов данных.
   3. Набор общих правил целостности, которые прямо или косвенно определяют множество непротиворечивых состояний базы данных и/или множество изменений её состояния.

#### 2.1.1. Типы структур данных
Структуризация данных базируется на использовании концепций **"агрегации"** и **"обобщения"**.

1. **Обобщение в базах данных:**
   - Обобщение в базах данных обычно относится к процессу сокращения деталей данных путем их группировки или упрощения. Это может включать в себя создание сводных таблиц, подсчет суммарных значений или вычисление агрегированных статистических показателей. Например, группировка и обобщение данных о продажах по месяцам.

2. **Агрегация в базах данных:**
   - Агрегация данных в базах данных представляет собой процесс объединения нескольких строк данных в одну строку, обычно для создания сводной информации. Это может включать в себя использование агрегатных функций, таких как SUM, AVG, COUNT и другие, для подсчета сумм, средних значений, количества и т.д. Например, агрегация данных о заказах для определения общей суммы продаж.

**Пример в SQL (Structured Query Language):**
```sql
-- Пример агрегации: Выборка общей суммы продаж для каждого продукта
SELECT ProductID, SUM(SalesAmount) AS TotalSales
FROM Sales
GROUP BY ProductID;
```

Один из первых вариантов структуризации:

###### КАРТИНКА НАХУЙ
Рис.2.1 Композиция структур данных по версии CODASYL

1. **Элемент данных** – наименьшая поименованная единица данных, к которой СУБД может обращаться непосредственно и с помощью которой выполняется построение всех остальных структур. Для каждого элемента данных должен быть определён его тип.

2. **Агрегат данных** – поименованная совокупность элементов данных внутри записи, которую можно рассматривать как единое целое. *Агрегат* может быть простым (включающим только элементы данных, рис. 2.2,а) и составным (включающим наряду с элементами данных и другие агрегаты, рис. 2.2,б).

   ###### КАРТИНКА НАХУЙ
   Рис.2.2 Примеры агрегатов: а) простой и б) составной агрегат

3. **Запись** – поименованная совокупность элементов данных или элементов данных и агрегатов. 
   **Запись** – это *__агрегат__*, не входящий в состав никакого другого *__агрегата__*; она может иметь сложную иерархическую структуру, поскольку допускается многократное применение агрегации.
   Различают тип записи (её структуру) и экземпляр записи, т.е. запись с конкретными значениями элементов данных. Одна запись описывает свойства одной сущности ПО (экземпляра). Иногда термин **"запись"** заменяют термином **"группа"**.
   Пример записи, содержащей сведения о сотруднике, приведён на рис. 2.3.

   ###### КАРТИНКА НАХУЙ
   Рис.2.3 Пример записи типа _СОТРУДНИК_

   Эта запись имеет несколько элементов данных (_Номер пропуска_, _Должность_, _Пол_ и т.д.) и три агрегата: простые агрегаты _ФИО_ и _Адрес_ и повторяющийся агрегат _Телефоны_. (Повторяющийся агрегат может включаться в запись произвольное число раз).

   Среди элементов данных (полей записи) выделяются одно или несколько ключевых полей. Значения ключевых полей позволяют классифицировать сущность, к которой относится конкретная запись. Ключи с уникальными значениями называются потенциальными. 
   
   Каждый ключ может представлять собой агрегат данных. Один из ключей назначается первичным, остальные являются вторичными. Первичный ключ идентифицирует экземпляр записи, его значение должно быть уникальным и обязательным для записей одного типа. 

   Для примера на рис. 2.3 потенциальными ключами являются поля _№ пропуска_ и _Паспорт_, а первичным ключом целесообразнее выбрать поле _№ пропуска_, т.к. оно явно занимает меньше памяти, чем паспортные данные.

4. **Группа** (Set): Группа в контексте баз данных представляет собой коллекцию данных или записей, объединенных по какому-то общему критерию. Например, это могут быть все данные о сотрудниках в компании, данные о заказах в интернет-магазине и т.д. Группа обычно организована в виде таблицы (в реляционных базах данных), набора записей (в CODASYL-подобных базах данных) или какой-то другой структуры, зависящей от модели данных.

5. **Набор** (или групповое отношение) – поименованная совокупность записей, образующих двухуровневую иерархическую структуру. 
   Каждый тип набора представляет собой связь между двумя или несколькими типами записей. 
   Для каждого типа набора один тип записи объявляется владельцем набора, остальные типы записи объявляются членами набора. Каждый экземпляр набора должен содержать только один экземпляр записи типа владельца и столько экземпляров записей типа членов набора, сколько их связано с владельцем. 
   Для группового отношения также различают тип и экземпляр.

   Групповые отношения удобно изображать с помощью диаграммы Бахмана, которая названа так по имени одного из разработчиков сетевой модели данных.

   Диаграмма Бахмана – это ориентированный граф, вершины которого соответствуют группам (типам записей), а дуги – групповым отношениям (рис. 2.4).
   ###### КАРТИНКА НАХУЙ
   Рис. 2.4 Пример диаграммы Бахмана для фрагмента БД "Город"

   Здесь запись типа ПОЛИКЛИНИКА является владельцем записей типа ЖИТЕЛЬ и они связаны групповым отношением диспансеризация. Запись типа ОРГАНИЗАЦИЯ также является владельцем записей типа ЖИТЕЛЬ и они связаны групповым отношением работают. Записи типа РЭУ и типа ЖИТЕЛЬ являются владельцами записей типа КВАРТИРА с отношениями    соответственно обслуживают и проживают. Таким образом, запись одного и того же типа может быть членом одного отношения и владельцем другого.

6. **База данных** – поименованная совокупность экземпляров групп и групповых
отношений. Это самый высокий уровень структуризации данных.

#### 2.1.2. Операции над данными

I. DDL (Data Definition Language):
   1. Create
   2. Drop
   3. Alter
   4. Truncate
   5. Comment
   6. Rename

II. DQL (Data Query Language):
   1. SELECT

III. DML (Data Manipulation Language):
   1. INSERT
   2. UPDATE
   3. DELETE
   4. LOCK
   5. MERGE

IV. DCL (Data Control Language):
   1. GRANT
   2. REVOKE

V. TCL (Transaction Control Language):
   1. COMMIT
   2. ROLLBACK
   3. SAVEPOINT
   4. SET TRANSACTION

В 3 этапа:
 1. Выборка с условием `SELECT`
 2. Набор операций над выбранными данными
      - поиск
      - чтение
      - запись\добавление
      - изменение
      - удаление
 3. Регистрация и выполнение транзакции

#### 2.1.3. Ограничения целостности