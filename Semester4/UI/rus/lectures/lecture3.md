
# XML


**W3C** (World Wide Web Consortium) - некоммерческая организация, занимающаяся стандартизацией Всемирной паутины. Рекомендации (стандарты) W3C общедоступны и бесплатны на [https://www.w3.org/](https://www.w3.org/).

![](3.1.png)

![](3.2.png)

Ресурс - это что-то, что имеет идентификатор (RFC 2396), может быть электронным документом, сервисом или коллекцией ресурсов.

Информационные ресурсы - это ресурсы, характеристики которых могут быть переданы в сообщении (обычно имеют одно или несколько представлений, доступных по протоколу HTTP).

Неинформационные ресурсы - это ресурсы, которые не являются информационными ресурсами (абстрактные ресурсы).

Репрезентация ресурса - это информация, отражающая прошлое, текущее или желаемое состояние ресурса в формате, который легко обменивать по протоколу, и состоит из набора метаданных представления и потенциально неограниченного потока данных представления (RFC 7231).

Каждый ресурс может иметь несколько представлений: (X)HTML, XML, RDF, JSON и т.д


```
<?xml version="1.0" encoding="UTF-8"?>
<Order>
    <BuyersID>GMB91604</BuyersID>
    <BuyerParty>
        <ID>KEEN</ID>
        <PartyName>
            <Name>Maynard James Keenan</Name>
        </PartyName>
        <Address>
            <Room>505</Room>
            <BuildingNumber>11271</BuildingNumber>
            <StreetName>Ventura Blvd.</StreetName>
            <CityName>Studio City</CityName>
            <PostalZone>91604</PostalZone>
            <CountrySubentity>California</CountrySubentity>
            <Country>USA</Country>
        </Address>
    </BuyerParty>
    <OrderLine>
        <LineItem>
            <BookItem>
                <Title>Document</Title>
                <Author>Glushko and McGrath</Author>
                <ISBN>0262072610</ISBN>
            </BookItem>
            <BasePrice>99.95</BasePrice>
            <Quantity>300</Quantity>
        </LineItem>
    </OrderLine>
</Order>
```

Unicode - это стандарт для последовательного кодирования, представления и обработки текста. Он содержит более 120 000 символов, охватывающих 129 языков. Символы могут быть закодированы несколькими способами (UTF-8, UTF-16 или UTF-32).

eXtensible Markup Language (XML) - это метаязык, то есть набор правил для определения конкретных языков. XML является языком разметки текста (markup language).

HyperText Markup Language (HTML) можно рассматривать как один из многих диалектов XML.

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
    <title>doc12</title>
</head>
<body>
    <h2>Table</h2>
    <p>web</p>
    <table width="100%">
        <tr>
            <td><b><u>tutor</u></b></td>
            <td><a href="starweb.html"><img src="srat.gif" border="0" /></a></td>
        </tr>
        <tr>
            <td><img src="sky.gif" border="0" /></td>
        </tr>
    </table>
</body>
</html>

```

![](3.3.png)

XML не содержит заранее определенного словаря (набора элементов и атрибутов) или заранее определенной грамматики (правил, по которым структурируются элементы и атрибуты). Словарь и грамматика определяются для каждого типа XML документов индивидуально (диалект).

* Использование в Интернете
- Обеспечивает однозначность при автоматической обработке
- Легко писать программы для обработки XML документов
- Читабельность и самоочевидность
- Краткость не имеет значения

XML Info Set (XML скуп информација) - это концептуальная модель XML документов, которая является основой для других стандартов W3C.
Элементы модели представляют собой информационные элементы и связи между ними.
* Существует 11 типов информационных элементов (документы, элементы, атрибуты, пространства имен, текст, комментарии, процессорные инструкции, ссылки на сущности, объявления типов документов, неанализированные сущности и нотации).
* Также существует несколько типов связей (родитель, ребенок, предок, потомок, брат или сестра, атрибут, пространство имен и т. д.).
XML Info Set можно рассматривать как дерево, а информационные элементы как узлы этого дерева.

![](3.3.png)

XML  
XML Namespaces 
XPath  
XML Schema итд.

XML документы реализуют модель XML Info Set.
Они содержат узлы различных типов, упорядоченные в структуру дерева.
Теги - это синтаксические конструкции, которые используются для того, чтобы иерархическая структура дерева была сериализована в линейную структуру текстового документа (то есть последовательность символов).

Типы узлов:
- Документы
- Элементы
- Атрибуты
- Пространства имен
- Текст
- Комментарии
- Процессорные инструкции и т.д.

* Есть различие между заглавными и строчными буквами.
* Они могут содержать только буквы, цифры, нижнее подчеркивание (_), дефис (-), двоеточие (:) и точку (.).
* Они должны начинаться с буквы или нижнего подчеркивания (_). Они не могут начинаться со строки "xml".

Ознака (tag) - это текстовая метка, обозначающая начало и конец элемента.
Содержимое элемента находится между открывающей (начальной) и закрывающей (конечной) знаками.

**Тег (tag)** - это текстовая метка для начала и конца элемента.
Содержимое элемента находится между открывающим и закрывающим тегами.

**Неструктурированный текст** - это текст без явной иерархической структуры.
**Подэлементы** - это части документа, которые могут содержать как текст, так и другие элементы.
**Мешанина (неструктурированного) текста и подэлементов 
Без содержания (пустое содержание)** - это смесь текста и элементов без конкретного содержания.

```<foo>bar</foo>
<foo>
    <bar>qux</bar>
    <baz>qux</baz>
</foo>
<foo>
    bar <baz>qux</baz> bar
</foo>
<foo></foo>
<foo />

```

```
<contact>
    <name>Petar Petrovic</name>
    <address>Dunavska 1, Novi Sad</address>
    <telephone type="mobile">444-333</telephone>
</contact>
<contact>
    <name>
        <first>Petar</first>
        <last>Petrovic</last>
    </name>
    <address>
        <street>Dunavska</street>
        <number>1</number>
        <city>Novi Sad</city>
    </address>
    <telephone type="mobile">444-333</telephone>
</contact>

```

Элемент может иметь один или несколько атрибутов. Каждый атрибут имеет имя и значение.
Значение атрибута представляет собой текст без определенной структуры.

```
<name first="Petar" last="Petrovic" />
```

```
<name>
    <first>Petar</first>
    <last>Petrovic</last>
</name>
<name first="Petar" last="Petrovic" />
```

Написанные комментарии не предназначены для программ, обрабатывающих XML документы, а для людей, читающих их.
Строка символов между "<!--" и "-->" - это комментарий.

```
<!−− This is a comment. −−>
```

Написанные комментарии не предназначены для людей, читающих XML документы, а для программ, которые их обрабатывают.
Строка символов между "<?" и "?>" - это инструкция обработки, предназначенная для программы, обрабатывающей XML документ.

```
<?xml version="1.0" encoding="UTF−8" standalone="no" ?> 
```

Вид процессной инструкции (которая обязательна с версии XML 1.1). Если присутствует, она должна находиться в начале XML документа. Может содержать три атрибута:
- "version" (версия стандарта XML)
- "encoding" (кодировка текста, обычно Unicode, то есть UTF-8)
- "standalone" (является ли возможным интерпретировать документ без других документов, таких как DTD, CSS и т. д.)


| референция на сущность | сущность |
| ---------------------- | -------- |
| ```&lt;```             | <        |
| ```&amp;```            | &        |
| ```&gt;```             | >        |
| ```&quot;```           | "        |
| ```&apos;```           | '        |

Текст, который интерпретируется без замены сущностей. Это строка символов между `<![CDATA[` и `]]>` в XML документе.

```<p>You can use a default <code>xmlns</code> attribute to avoid having to add the svg prefix to all your elements:</p>
<![CDATA[
<svg xmlns="http://www.w3.org/2000/svg" width="12cm" height="10cm">
 <ellipse rx="110" ry="130" />
 <rect x="4cm" y="1cm" width="3cm" height="6cm" /> 
</svg>
]]>

```


XML-документ считается хорошо сформированным, если он соответствует набору правил, которые позволяют его обрабатывать машинным образом.

- Необходимо соблюдать правила именования элементов и атрибутов.
- Документ должен иметь один и только один корневой элемент.
- Элементы не должны перекрываться.
- Значение атрибута должно находиться между одинарными или двойными кавычками.
- Элемент не должен иметь два атрибута с одним именем.
- Комментарии и процессорные инструкции не должны находиться внутри тегов.
- Специальные символы должны находиться только в своей роли.

```<telephone type=mobile >444−333</telephone>```

```
<telephone type="mobile" type="work">444−333</telephone>
```

```
<contact>  
 This is a special sign > 
</contact>
```

XML-документ считается действительным, если он написан в соответствии с грамматикой (например, которая указана в XML Schema).

Пространства имен XML (XML namespaces) представляют собой наборы элементов, атрибутов и типов данных, идентифицированных одним и тем же идентификатором. Они решают проблему конфликта в именах элементов, атрибутов и типов данных.

```
<table>
  <tr>
    <td>Apples</td>
    <td>Bananas</td>
  </tr>
</table>

```

```<table>
  <name>African Coffee Table</name>
  <width>80</width>
  <length>120</length>
</table>

```

```<h:table xmlns:h="http://www.w3.org/TR/html4/">
  <h:tr>
    <h:td>Apples</h:td>
    <h:td>Bananas</h:td>
  </h:tr>
</h:table>

```


URI (Uniform Resource Identifier) - это строка символов, которая идентифицирует абстрактные или физические ресурсы. URL (Uniform Resource Locator) является подмножеством URI, которое идентифицирует ресурсы через основной механизм доступа (например, через сетевое расположение).

Примеры URI:
- http://www.ftn.uns.ac.rs/
- ftp://ftp.is.co.za/rfc/rfc1808.txt
- mailto:mduerst@ifi.unizh.ch

Пространства имен XML идентифицируются с использованием URL. URL не обязательно должен быть валидным именем XML.

Имена элементов, атрибутов и типов данных XML квалифицируются с помощью префикса, а префикс отображается на URL с использованием конструкции "xmlns". Один префикс может быть сопоставлен нескольким URL, и несколько префиксов могут быть сопоставлены одному URL.

Квалифицированное имя элемента, атрибута или типа данных XML состоит из идентификатора пространства имен и локального имени.

По умолчанию XML пространство имен (default XML namespace) - это пространство имен, которому принадлежат элементы, атрибуты и типы данных, не квалифицированные префиксом.

```
<?xml version="1.0" encoding="utf-8"?>
<pers:person xmlns:pers="http://www.ftn.ns.ac.yu/dtds/person.dtd" xmlns:xhtml="http://www.w3.org/1999/xhtml">
    <pers:name>
        <pers:title>Sir</pers:title>
        <pers:first>John</pers:first>
        <pers:last>Doe</pers:last>
    </pers:name>
    <pers:position>VP of Marketing</pers:position>
    <pers:resume>
        <xhtml:html>
            <xhtml:head>
                <xhtml:title>Resume of John Doe</xhtml:title>
            </xhtml:head>
            <xhtml:body>
                <xhtml:h1>John Doe</xhtml:h1>
                <xhtml:p>John’s a great guy, you know?</xhtml:p>
            </xhtml:body>
        </xhtml:html>
    </pers:resume>
</pers:person>

```

```
<?xml version="1.0" encoding="utf-8"?>
<pers:person xmlns:pers="http://www.ftn.ns.ac.yu/dtds/person.dtd">
    <pers:name>
        <pers:title>Sir</pers:title>
        <pers:first>John</pers:first>
        <pers:last>Doe</pers:last>
    </pers:name>
    <pers:position>VP of Marketing</pers:position>
    <pers:resume>
        <xhtml:html xmlns:xhtml="http://www.w3.org/1999/xhtml">
            <xhtml:head>
                <xhtml:title>Resume of John Doe</xhtml:title>
            </xhtml:head>
            <xhtml:body>
                <xhtml:h1>John Doe</xhtml:h1>
                <xhtml:p>John’s a great guy, you know?</xhtml:p>
            </xhtml:body>
        </xhtml:html>
    </pers:resume>
</pers:person>

```

XPath выражение состоит из одного или нескольких шагов, которые разделяются символом "/".
XPath выражения могут быть абсолютными (вычисляются относительно корневого узла документа и начинаются с символа "/") или относительными (вычисляются относительно текущего узла и не начинаются с символа "/").

![](3.3.png)

Элементы одного шага выражения XPath состоят из оси, теста узла и предиката:

axis::node_test[predicate]

Ось определяет направление движения в XML документе (то есть в дереве узлов XML).

![](3.4.png)

![](3.5.png)

![](3.6.png)

![](3.3.png)

Тест узла определяет имя или тип узла

![](3.7.png)


![](3.3.png)


Предикат определяет (логическое) условие для фильтрации результатов запроса

![](3.8.png)

![](3.9.png)

![](3.10.png)

![](3.3.png)

/html/body/p[position() = 1]
/html/body/p[1]
/html/body/p[last()]
count(/html/body/p)
